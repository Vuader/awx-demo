---
- name: Add JTI Resource
  hosts: "{{ targets }}"
  gather_facts: no

  tasks: 
    - name: showing the mchoice var
      debug:
        msg: "{{ interfaces }}"
    - name: Create empty list of commands
      set_fact:
        commands = []
    - name: Populate list of commands
      set_fact:
        command = "set groups CORE_INTERNAL interfaces {{item}} unit 0 family mpls"
        commands = "{{ commands + [ command ] }}"
      with_items: "{{ interfaces }}"
    - name: showing the commands
      debug:
        msg: "{{ commands }}"
    - name: load configure lines into device
      junos_config:
        lines: "{{ commands }}"
